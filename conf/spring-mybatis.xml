<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:p="http://www.springframework.org/schema/p"
  xmlns:context="http://www.springframework.org/schema/context"
  xmlns:aop="http://www.springframework.org/schema/aop"
  xmlns:tx="http://www.springframework.org/schema/tx"
  xmlns:util="http://www.springframework.org/schema/util"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
    http://www.springframework.org/schema/aop
    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
    http://www.springframework.org/schema/util
    http://www.springframework.org/schema/util/spring-util-3.0.xsd">
 
    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
		<property name="driverClass">
			<value>${jdbc.driver}</value>
		</property>
		<property name="jdbcUrl">
			<value>${jdbc.url}</value>
		</property>
		<property name="user">
			<value>${jdbc.username}</value>
		</property>
		<property name="password">
			<value>${jdbc.password}</value>
		</property>
		<!-- 指定连接数据库连接池的最大连接数 -->
		<property name="maxPoolSize">
			<value>20</value>
		</property>
		<!-- 指定连接池数据库连接池的最小连接数 -->
		<property name="minPoolSize">
			<value>1</value>
		</property>
		<!-- 指定连接池数据库连接池的初始化连接数 -->
		<property name="initialPoolSize">
			<value>1</value>
		</property>
		<!-- 指定连接池数据库连接池的连接的最大空闲时间 -->
		<property name="maxIdleTime">
			<value>20</value>
		</property>
	
	</bean>
     
     <bean id="sqlSessionFactory"
         class="org.mybatis.spring.SqlSessionFactoryBean"
         p:dataSource-ref="dataSource"
         p:configLocation="classpath:mybatis-config.xml"
        />
      
   <!--     通过配置MapperScannerConfigurer，可以将定义的接口文件与对应的数据库操作文件关联起来，如将UserDao接口同User.xml文件关联起来 
   		 其中关联关系的建立，是通过在User.xml文件定义时指定的命名空间名称。User.xml的命名空间定义为com.crazysnail.dao.UserDao，正是UserDao
   		 接口的全称。同时，需要注意，在UserDao接口中声明的方法名要对应到User.xml中定义的数据访问过程的id，接口中方法的形参类型对应到User.xml中数据访问过程的
   		 parameterType，方法的形参名对应到User.xml中数据访问过程中sql语句中的参数，接口方法的返回值类型对应User.xml中的resultType声明的类型。 
   -->
 <bean class="org.mybatis.spring.mapper.MapperScannerConfigurer"
        p:basePackage="com.xiyou.BCS.model"
        p:sqlSessionFactoryBeanName="sqlSessionFactory"/>
        
        <!-- 配置接口映射 -->
       <bean id="userDao" class="org.mybatis.spring.mapper.MapperFactoryBean">  
    	<property name="mapperInterface" value="com.xiyou.BCS.dao.UserDao" />  
    	<property name="sqlSessionFactory" ref="sqlSessionFactory" />  
	</bean>
  
   <!-- 对数据源进行事务管理 -->
  <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"
        p:dataSource-ref="dataSource"/>
        
</beans>